<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Validation</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
    <script defer src="./index.js"></script>
  </head>
  <style>
    body {
      background: linear-gradient(to right, #0f2027, #203a43, #2c5364);
      font-family: "Poppins", sans-serif;
      color: white;
    }

    a {
      color: aqua;
    }

    #form {
      width: 300px;
      margin: 20vh auto 0 auto;
      padding: 20px;
      background-color: whitesmoke;
      color: black;
      border-radius: 4px;
      font-size: 12px;
    }

    #form h1 {
      color: #0f2027;
      text-align: center;
    }

    #form button {
      padding: 10px;
      margin-top: 10px;
      width: 100%;
      color: white;
      background-color: rgb(41, 57, 194);
      border: none;
      border-radius: 4px;
    }

    .input-control {
      display: flex;
      flex-direction: column;
    }

    .input-control input {
      border: 2px solid #f0f0f0;
      border-radius: 4px;
      display: block;
      font-size: 12px;
      padding: 10px;
      width: 100%;
    }

    .input-control input:focus {
      outline: 0;
    }

    .input-control.success input {
      border-color: #09c372;
    }

    .input-control.error input {
      border-color: #ff3860;
    }

    .input-control .error {
      color: #ff3860;
      font-size: 9px;
      height: 13px;
    }
  </style>
  <body>
    <div class="container">
      CodePen :
      <a
        href="https://codepen.io/javascriptacademy-stash/pen/oNeNMNR?editors=1010"
        >https://codepen.io/javascriptacademy-stash/pen/oNeNMNR?editors=1010</a
      >
      <br />
      YouTube :
      <a href="https://www.youtube.com/watch?v=CYlNJpltjMM"
        >https://www.youtube.com/watch?v=CYlNJpltjMM</a
      >
      <form
        name="reserve"
        action="gameon-form-validation.html"
        method="post"
        id="form"
        onsubmit="return validate();"
        novalidate
      >
        <!-- Désactivation de la validation automatique du navigateur sur le formulaire en ajoutant l'attribut novalidate -->

        <div class="input-control">
          <label for="firstname">Prénom</label>
          <input
            type="text"
            id="firstname"
            name="firstname"
          />
          <div class="error"></div>
        </div>
        <div class="input-control">
          <label for="lastname">Nom</label><br />
          <input
            class="text-control"
            type="text"
            id="lastname"
            name="lastname"
          />
          <div class="error"></div>
        </div>
       <!--  <div class="formData">
          <label for="email">E-mail</label><br />
          <input class="text-control" type="email" id="email" name="email" />
          <div class="error"></div>
        </div>
        <div class="formData">
          <label for="birthdate">Date de naissance</label><br />
          <input
            class="text-control"
            type="date"
            id="birthdate"
            name="birthdate"
          />
          <div class="error"></div>
        </div>
        <div class="formData">
          <label for="nbTournamentsPlayed"
            >À combien de tournois GameOn avez-vous déjà participé ?</label
          ><br />
          <input
            type="number"
            class="text-control"
            id="quantity"
            name="quantity"
          />
          <div class="error"></div>
        </div>
        <div class="formData location">
          <label for="location"
            >À quel tournoi souhaitez-vous participer cette année ?</label
          ><br />
          <input
            class="checkbox-input"
            type="radio"
            id="location1"
            name="location"
            value="New York"
          />
          <label class="checkbox-label" for="location1">
            <span class="checkbox-icon"></span>
            New York</label
          >
          <input
            class="checkbox-input"
            type="radio"
            id="location2"
            name="location"
            value="San Francisco"
          />
          <label class="checkbox-label" for="location2">
            <span class="checkbox-icon"></span>
            San Francisco</label
          >
          <input
            class="checkbox-input"
            type="radio"
            id="location3"
            name="location"
            value="Seattle"
          />
          <label class="checkbox-label" for="location3">
            <span class="checkbox-icon"></span>
            Seattle</label
          >
          <input
            class="checkbox-input"
            type="radio"
            id="location4"
            name="location"
            value="Chicago"
          />
          <label class="checkbox-label" for="location4">
            <span class="checkbox-icon"></span>
            Chicago</label
          >
          <input
            class="checkbox-input"
            type="radio"
            id="location5"
            name="location"
            value="Boston"
          />
          <label class="checkbox-label" for="location5">
            <span class="checkbox-icon"></span>
            Boston</label
          >
          <input
            class="checkbox-input"
            type="radio"
            id="location6"
            name="location"
            value="Portland"
          />
          <label class="checkbox-label" for="location6">
            <span class="checkbox-icon"></span>
            Portland</label
          >
          <div class="error"></div>
        </div>

        <div class="formData cgu">
          <input class="checkbox-input" type="checkbox" id="checkbox1" />
          <label class="checkbox2-label" for="checkbox1">
            <span class="checkbox-icon"></span>
            J'ai lu et j'accepte les conditions d'utilisation.
          </label>
          <br />
          <input class="checkbox-input" type="checkbox" id="checkbox2" />
          <label class="checkbox2-label" for="checkbox2">
            <span class="checkbox-icon"></span>
            Je souhaite être prévenu des prochains évènements.
          </label>
          <div class="error"></div>
          <br />
        </div> -->
        <input
          class="btn-submit"
          type="submit"
          class="button"
          value="C'est parti !"
        />
      </form>
    </div>
    <script defer>
      const form = document.getElementById("form");
      const firstname = document.getElementById("firstname");
      const lastname = document.getElementById("lastname");
      // const email = document.getElementById("email");
      // const birthdate = document.getElementById("birthdate");
      // const quantity = document.getElementById("quantity");
      // const location = document.getElementById("location");
      // const checkbox1 = document.getElementById("checkbox1");

      form.addEventListener("submit", event => {
        event.preventDefault();

        validate();
      });

      const setError = (element, message) => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector(".error");

        errorDisplay.innerText = message;
        inputControl.classList.add("error");
        inputControl.classList.remove("success");
      };

      const setSuccess = (element) => {
        const inputControl = element.parentElement;
        const errorDisplay = inputControl.querySelector(".error");

        errorDisplay.innerText = "";
        inputControl.classList.add("success");
        inputControl.classList.remove("error");
      };

      // const isValidEmail = (email) => {
      //   const regex =
      //     /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
      //   return regex.test(String(email).toLowerCase());
      // };

      const validate = () => {
        const firstnameValue = firstname.value.trim();
        const lastnameValue = lastname.value.trim();
        // const emailValue = email.value.trim();
        // const birthdateValue = birthdate.value;
        // const quantityValue = quantity.value.trim();
        // const locationValue = location.value;
        // const checkbox1Value = checkbox1.value;

        if (firstnameValue === "") {
          setError(firstname, "Veuillez indiquer votre prénom svp");
        } else if (firstnameValue.length < 2) {
          setError(firstname, "Le prénom doit comporter au moins 2 caractères");
        } else {
          setSuccess(firstname);
        }

        if (lastnameValue === "") {
          setError(lastname, "Veuillez indiquer votre nom svp");
        } else if (lastnameValue.length < 2) {
          setError(lastname, "Le nom doit comporter au moins 2 caractères");
        } else {
          setSuccess(lastname);
        }

        // if (emailValue === "") {
        //   setError(email, "Username is required");
        // } else if (!isValidEmail(emailValue)) {
        //   setError(email, "Provide a valid email address");
        // } else {
        //   setSuccess(email);
        // }

        // if (passwordValue === "") {
        //   setError(password, "Password is required");
        // } else if (passwordValue.length < 8) {
        //   setError(password, "Password must be at least 8 character.");
        // } else {
        //   setSuccess(password);
        // }

        // if (password2Value === "") {
        //   setError(password2, "Please confirm your password");
        // } else if (password2Value !== passwordValue) {
        //   setError(password2, "Passwords doesn't match");
        // } else {
        //   setSuccess(password2);
        // }
      };
    </script>
  </body>
</html>

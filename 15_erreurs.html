<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Les Erreurs</title>
  </head>
  <body>
    <h1>Les Erreurs (Géométrie - Rectangle / Square)</h1>
    <a href="https://grafikart.fr/tutoriels/class-tp-2063" target="_blank"
      >https://grafikart.fr/tutoriels/class-tp-2062</a
    >
    <script>
      class Rectangle {
        constructor(width, height) {
          if (width <= 0 || height <= 0) {
            throw new Error(
              `Impossible d'avoir une forme géométrique avec des dimensions négatives`
            ); // si le throw est déclenché ça coupe complètement le script
          }
          this.width = width;
          this.height = height;
        }

        get perimeter() {
          // return this.width * 2 + this.height * 2
          return (this.width + this.height) * 2;
        }

        get isValid() {
          return this.width > 0 && this.height > 0;
        }

        isBiggerThan(shape) {
          return this.perimeter > shape.perimeter;
        }
      }

      class Square extends Rectangle {
        constructor(width) {
          super(width, width);
        }
      }

      // const r = new Rectangle(-10, 20)

      // try {
      //   // const width = prompt("Largeur") * 1; // on peut aussi utiliser la méthode parseInt()
      //   const width = parseInt(prompt("Largeur"), 10);
      //   const height = parseInt(prompt("Hauteur"), 10);
      //   const r = new Rectangle(width, height);
      //   console.log(r.perimeter);
      // } catch (e) {
      //   console.log('Impossible de construire la forme');
      // }

      class PromptError extends Error {
         
      }

      function promptRectangle() {
        try {
        const width = parseInt(prompt("Largeur"), 10);
        const height = parseInt(prompt("Hauteur"), 10);
        const r = new Rectangle(width, height);
        return r
      } catch (e) {
        // throw new Error('Entrée utilisateur invalide', {cause: e})
        throw new PromptError('Entrée utilisateur invalide', {cause: e})
      }
      }

      // promptRectangle() 

      try {
      promptRectangle() 
      } catch(e) {
        console.log(e.message, {e})
        if (e instanceof PromptError) {
          console.log('PromptError')
        } else {
          console.log('erreur classique')
        }
      }

    </script>
  </body>
</html>
